<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>uMtMu</title>
<!-- 2017-03-22 Çrş 14:21 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="umt" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">uMtMu</h1>
<link rel="stylesheet" type="text/css" href="css/style.css" />
<script src="js/scripts.js"></script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<div class="center">

<div class="figure">
<p><img src="img/ja2.png" alt="ja2.png" /><br  />
</p>
</div>
</div>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Yol</a>
<ul>
<li><a href="#sec-1-1">1.1. Writing your first Django app, part 1</a></li>
<li><a href="#sec-1-2">1.2. Writing your first Django app, part 2</a></li>
<li><a href="#sec-1-3">1.3. Writing your first Django app, part 3</a></li>
<li><a href="#sec-1-4">1.4. Writing your first Django app, part 4</a></li>
<li><a href="#sec-1-5">1.5. Writing your first Django app, part 5</a></li>
<li><a href="#sec-1-6">1.6. Writing your first Django app, part 6</a></li>
<li><a href="#sec-1-7">1.7. Writing your first Django app, part 7</a></li>
<li><a href="#sec-1-8">1.8. Yerelleştirme ve Çeviri</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Araştırılacak <code>[0/3]</code></a></li>
<li><a href="#sec-3">3. Bağlantılar</a></li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Yol</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Writing your first Django app, part 1</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> Virtul Env</h4>
<div class="outline-text-4" id="text-1-1-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python
mkdir mydj_sites
<span style="color: #f08080;">cd</span> mydj_sites
virtualenv django_env
<span style="color: #f08080;">.</span> django_env/bin/activate
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> Projenin oluşturulması</h4>
<div class="outline-text-4" id="text-1-1-2">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
django-admin startproject mydj_sites
</pre>
</div>
<p>
django_env/<br  />
   &#x2026;<br  />
mydj_sites/<br  />
<b>root directory is just a container for your project. Its name doesn’t matter<br  />
to Django; you can rename it to anything you like.</b>  <br  />
├── manage.py<br  />
<b>A command-line utility that lets you interact with this Django project in<br  />
various ways.</b> <br  />
└── mydj_sites <br  />
<b>directory is the actual Python package for your project. Its name is the<br  />
Python package name you’ll need to use to import anything inside it</b> <br  />
           ├── <span class="underline"><span class="underline">init</span></span>.py<br  />
           ├── settings.py<br  />
           ├── urls.py<br  />
           └── wsgi.py<br  />
</p>
</div>
</div>

<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> Geliştirme sunucusu</h4>
<div class="outline-text-4" id="text-1-1-3">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
python mydj_sites/manage.py runserver
</pre>
</div>
<p>
python manage.py runserver<br  />
Performing system checks&#x2026;<br  />
</p>

<p>
System check identified no issues (0 silenced).<br  />
</p>

<p>
You have 13 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.<br  />
Run 'python manage.py migrate' to apply them.<br  />
</p>

<p>
September 04, 2016 - 18:52:28<br  />
Django version 1.10.1, using settings 'mydj_sites.settings'<br  />
Starting development server at <a href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a><br  />
Quit the server with CONTROL-C.<br  />
</p>
</div>
</div>
<div id="outline-container-sec-1-1-4" class="outline-4">
<h4 id="sec-1-1-4"><span class="section-number-4">1.1.4</span> İlk uygulamanın oluşturulması</h4>
<div class="outline-text-4" id="text-1-1-4">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites
python manage.py startapp polls
</pre>
</div>

<p>
Oluşan dizin yapısı<br  />
polls/<br  />
├── admin.py<br  />
├── apps.py<br  />
├── <span class="underline"><span class="underline">init</span></span>.py<br  />
├── migrations<br  />
│   └── <span class="underline"><span class="underline">init</span></span>.py<br  />
├── models.py<br  />
├── tests.py<br  />
└── views.py<br  />
</p>
</div>
</div>

<div id="outline-container-sec-1-1-5" class="outline-4">
<h4 id="sec-1-1-5"><span class="section-number-4">1.1.5</span> İlk view'ın oluşturulması</h4>
<div class="outline-text-4" id="text-1-1-5">
<div class="org-src-container">

<pre class="src src-python">polls/views.py
<span style="color: #00bfff;">from</span> django.http <span style="color: #00bfff;">import</span> HttpResponse


<span style="color: #00bfff;">def</span> <span style="color: #daa520;">index</span>(request):
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> HttpResponse(<span style="color: #deb887;">"Hello, world. You're at the polls index."</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-1-6" class="outline-4">
<h4 id="sec-1-1-6"><span class="section-number-4">1.1.6</span> polls dizini altında urls.py dosyasının oluşturulması</h4>
<div class="outline-text-4" id="text-1-1-6">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.conf.urls <span style="color: #00bfff;">import</span> url

<span style="color: #00bfff;">from</span> . <span style="color: #00bfff;">import</span> views

<span style="color: #4eee94;">urlpatterns</span> = [
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^$'</span>, views.index, name=<span style="color: #deb887;">'index'</span>),
]
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-1-7" class="outline-4">
<h4 id="sec-1-1-7"><span class="section-number-4">1.1.7</span> mydj_sites/mydj_sites/mydj_sites dizinindeki urls.py içeriğine yönlendirme ekleme</h4>
<div class="outline-text-4" id="text-1-1-7">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.conf.urls <span style="color: #00bfff;">import</span> url, include
<span style="color: #00bfff;">from</span> django.contrib <span style="color: #00bfff;">import</span> admin

<span style="color: #4eee94;">urlpatterns</span> = [
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^polls/'</span>, include(<span style="color: #deb887;">'polls.urls'</span>)),
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^admin/'</span>, admin.site.urls),
]
</pre>
</div>
<p>
<a href="http://localhost:8000/polls/">http://localhost:8000/polls/</a><br  />
</p>
</div>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Writing your first Django app, part 2</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> Veri tabanının ayarlanması</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
mydj_sites/mydj_sites/mydj_sites/settings.py dosyası içerisinde veri tabanı<br  />
olarak sqlite seçili. INSTALLED_APPS dizisi içerisinde belirlenmiş<br  />
uygulamalar için veri tabanında tablolar oluşturulmalı.<br  />
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites

python manage.py migrate
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> Veri tabanı modellerinin oluşturulması</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
polls/models.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.db <span style="color: #00bfff;">import</span> models


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">Question</span>(models.Model):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">question_text</span> = models.CharField(max_length=200)
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">pub_date</span> = models.DateTimeField(<span style="color: #deb887;">'date published'</span>)


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">Choice</span>(models.Model):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">question</span> = models.ForeignKey(Question, on_delete=models.CASCADE)
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">choice_text</span> = models.CharField(max_length=200)
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">votes</span> = models.IntegerField(default=0)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> Modellerin aktive edilmesi</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
Veri tabanı şemasının oluşturulması<br  />
Veri tabanı objelerinin oluşturulması<br  />
</p>

<p>
Yukarıda belirtilen eylemler, polls uygulamasının<br  />
mydj_sites/mydj_sites/mydj_sites/settings.py dosyası INSTALLED_APPS<br  />
listesinin içerisine "'polls.apps.PollsConfig'," olarak eklenmesi gerekir.<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites
python manage.py makemigrations polls
</pre>
</div>
<p>
makemigrations komutu ile yeni eklenen uygulamalar olduğunu ve bu<br  />
uygulamalar için gerekli veri tabanı değişikliklerinin yapılacağı bilgisi<br  />
verilmektedir. Daha önce bu işlem için south uygulaması kullanılmıştı. Bu<br  />
yöntem ile veri tabanı değişiklikleri sürüm kontrol sistemi altında tutulmuş.<br  />
</p>

<p>
python manage.py makemigrations polls<br  />
Migrations for 'polls':<br  />
polls/migrations/0001_initial.py:<br  />
</p>
<ul class="org-ul">
<li>Create model Choice<br  />
</li>
<li>Create model Question<br  />
</li>
<li>Add field question to choice<br  />
</li>
</ul>
<p>
polls/migrations/0001_initial.py dosyasının aldında ilgili migration ile<br  />
ilgili işlemler bulunmaktadır.<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites
python manage.py sqlmigrate polls 0001 <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">migration'&#305;n SQL kar&#351;&#305;l&#305;&#287;&#305;</span>
python manage.py migrate
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-2-4" class="outline-4">
<h4 id="sec-1-2-4"><span class="section-number-4">1.2.4</span> API ile oynamak ??</h4>
<div class="outline-text-4" id="text-1-2-4">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites
pyton manage.py shell <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">python shell django projemizi root alarak ba&#351;l&#305;yor.</span>
&gt;&gt;&gt; import django
&gt;&gt;&gt; django.setup()
&gt;&gt;&gt; from polls.models import Question, Choice   <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Import the model classes we just wrote.</span>

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">No questions are in the system yet.</span>
&gt;&gt;&gt; Question.objects.all()
&lt;QuerySet []&gt;

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Create a new Question.</span>
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Support for time zones is enabled in the default settings file, so</span>
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Django expects a datetime with tzinfo for pub_date. Use timezone.now()</span>
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">instead of datetime.datetime.now() and it will do the right thing.</span>
&gt;&gt;&gt; from django.utils import timezone
&gt;&gt;&gt; q = Question(<span style="color: #4eee94;">question_text</span>=<span style="color: #deb887;">"What's new?"</span>, <span style="color: #4eee94;">pub_date</span>=timezone.now())

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Save the object into the database. You have to call save() explicitly.</span>
&gt;&gt;&gt; q.save()

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Now it has an ID. Note that this might say "1L" instead of "1", depending</span>
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">on which database you're using. That's no biggie; it just means your</span>
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">database backend prefers to return integers as Python long integer</span>
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">objects.</span>
&gt;&gt;&gt; q.id
1

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Access model field values via Python attributes.</span>
&gt;&gt;&gt; q.question_text
<span style="color: #deb887;">"What's new?"</span>
&gt;&gt;&gt; q.pub_date
<span style="color: #daa520;">datetime.datetime</span>(2012, 2, 26, 13, 0, 0, 775217, <span style="color: #4eee94;">tzinfo</span>=&lt;UTC&gt;)

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Change values by changing the attributes, then calling save().</span>
&gt;&gt;&gt; q.question_text = <span style="color: #deb887;">"What's up?"</span>
&gt;&gt;&gt; q.save()

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">objects.all() displays all the questions in the database.</span>
&gt;&gt;&gt; Question.objects.all()
&lt;QuerySet [&lt;Question: Question object&gt;]&gt;
</pre>
</div>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites
pyton manage.py shell <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">python shell django projemizi root alarak ba&#351;l&#305;yor.   </span>
&gt;&gt;&gt; from polls.models import Question, Choice

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Make sure our __str__() addition worked.</span>
&gt;&gt;&gt; Question.objects.all()
&lt;QuerySet [&lt;Question: What<span style="color: #deb887;">'s up?&gt;]&gt;</span>

<span style="color: #deb887;"># Django provides a rich database lookup API that'</span>s entirely driven by
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">keyword arguments.</span>
&gt;&gt;&gt; Question.objects.filter(<span style="color: #4eee94;">id</span>=1)
&lt;QuerySet [&lt;Question: What<span style="color: #deb887;">'s up?&gt;]&gt;</span>
<span style="color: #deb887;">&gt;&gt;&gt; Question.objects.filter(question_text__startswith='</span>What<span style="color: #deb887;">')</span>
<span style="color: #deb887;">&lt;QuerySet [&lt;Question: What'</span>s up?&gt;]&gt;

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Get the question that was published this year.</span>
&gt;&gt;&gt; from django.utils import timezone
&gt;&gt;&gt; current_year = timezone.now().year
&gt;&gt;&gt; Question.objects.get(<span style="color: #4eee94;">pub_date__year</span>=current_year)
&lt;Question: What<span style="color: #deb887;">'s up?&gt;</span>

<span style="color: #deb887;"># Request an ID that doesn'</span>t exist, this will raise an exception.
&gt;&gt;&gt; Question.objects.get(<span style="color: #4eee94;">id</span>=2)
<span style="color: #daa520;">Traceback</span> (most recent call last):
    ...
DoesNotExist: Question matching query does not exist.

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Lookup by a primary key is the most common case, so Django provides a</span>
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">shortcut for primary-key exact lookups.</span>
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">The following is identical to Question.objects.get(id=1).</span>
&gt;&gt;&gt; Question.objects.get(<span style="color: #4eee94;">pk</span>=1)
&lt;Question: What<span style="color: #deb887;">'s up?&gt;</span>

<span style="color: #deb887;"># Make sure our custom method worked.</span>
<span style="color: #deb887;">&gt;&gt;&gt; q = Question.objects.get(pk=1)</span>
<span style="color: #deb887;">&gt;&gt;&gt; q.was_published_recently()</span>
<span style="color: #deb887;">True</span>

<span style="color: #deb887;"># Give the Question a couple of Choices. The create call constructs a new</span>
<span style="color: #deb887;"># Choice object, does the INSERT statement, adds the choice to the set</span>
<span style="color: #deb887;"># of available choices and returns the new Choice object. Django creates</span>
<span style="color: #deb887;"># a set to hold the "other side" of a ForeignKey relation</span>
<span style="color: #deb887;"># (e.g. a question'</span>s choice) which can be accessed via the API.
&gt;&gt;&gt; q = Question.objects.get(<span style="color: #4eee94;">pk</span>=1)

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Display any choices from the related object set -- none so far.</span>
&gt;&gt;&gt; q.choice_set.all()
&lt;QuerySet []&gt;

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Create three choices.</span>
&gt;&gt;&gt; q.choice_set.create(<span style="color: #4eee94;">choice_text</span>=<span style="color: #deb887;">'Not much'</span>, <span style="color: #4eee94;">votes</span>=0)
&lt;Choice: Not much&gt;
&gt;&gt;&gt; q.choice_set.create(<span style="color: #4eee94;">choice_text</span>=<span style="color: #deb887;">'The sky'</span>, <span style="color: #4eee94;">votes</span>=0)
&lt;Choice: The sky&gt;
&gt;&gt;&gt; c = q.choice_set.create(<span style="color: #4eee94;">choice_text</span>=<span style="color: #deb887;">'Just hacking again'</span>, <span style="color: #4eee94;">votes</span>=0)

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Choice objects have API access to their related Question objects.</span>
&gt;&gt;&gt; c.question
&lt;Question: What<span style="color: #deb887;">'s up?&gt;</span>

<span style="color: #deb887;"># And vice versa: Question objects get access to Choice objects.</span>
<span style="color: #deb887;">&gt;&gt;&gt; q.choice_set.all()</span>
<span style="color: #deb887;">&lt;QuerySet [&lt;Choice: Not much&gt;, &lt;Choice: The sky&gt;, &lt;Choice: Just hacking again&gt;]&gt;</span>
<span style="color: #deb887;">&gt;&gt;&gt; q.choice_set.count()</span>
<span style="color: #deb887;">3</span>

<span style="color: #deb887;"># The API automatically follows relationships as far as you need.</span>
<span style="color: #deb887;"># Use double underscores to separate relationships.</span>
<span style="color: #deb887;"># This works as many levels deep as you want; there'</span>s no limit.
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Find all Choices for any question whose pub_date is in this year</span>
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">(reusing the 'current_year' variable we created above).</span>
&gt;&gt;&gt; Choice.objects.filter(<span style="color: #4eee94;">question__pub_date__year</span>=current_year)
&lt;QuerySet [&lt;Choice: Not much&gt;, &lt;Choice: The sky&gt;, &lt;Choice: Just hacking again&gt;]&gt;

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Let's delete one of the choices. Use delete() for that.</span>
&gt;&gt;&gt; c = q.choice_set.filter(<span style="color: #4eee94;">choice_text__startswith</span>=<span style="color: #deb887;">'Just hacking'</span>)
&gt;&gt;&gt; c.delete()
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-2-5" class="outline-4">
<h4 id="sec-1-2-5"><span class="section-number-4">1.2.5</span> Django Admin</h4>
<div class="outline-text-4" id="text-1-2-5">
</div><ol class="org-ol"><li><a id="sec-1-2-5-1" name="sec-1-2-5-1"></a>admin kullanıcısı oluşturma<br  /><div class="outline-text-5" id="text-1-2-5-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites
python manage.py createsuperuser
python manage.py runserver
</pre>
</div>

<p>
<a href="http://127.0.0.1:8000/admin/">http://127.0.0.1:8000/admin/</a><br  />
</p>
</div>
</li>
<li><a id="sec-1-2-5-2" name="sec-1-2-5-2"></a>polls uygulamasını admin penceresi üzerinde erişime açma<br  /><div class="outline-text-5" id="text-1-2-5-2">
<p>
polls/admin.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.contrib <span style="color: #00bfff;">import</span> admin

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Question

admin.site.register(Question)
</pre>
</div>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Writing your first Django app, part 3</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Başlıklar</h4>
<div class="outline-text-4" id="text-1-3-1">
<ul class="org-ul">
<li>Blog homepage – displays the latest few entries.<br  />
</li>
<li>Entry “detail” page – permalink page for a single entry.<br  />
</li>
<li>Year-based archive page – displays all months with entries in the given year.<br  />
</li>
<li>Month-based archive page – displays all days with entries in the given month.<br  />
</li>
<li>Day-based archive page – displays all entries in the given day.<br  />
</li>
<li>Comment action – handles posting comments to a given entry.<br  />
</li>
</ul>
<p>
In our poll application, we’ll have the following four views:<br  />
</p>
<ul class="org-ul">
<li>Question “index” page – displays the latest few questions.<br  />
</li>
<li>Question “detail” page – displays a question text, with no results but with a form to vote.<br  />
</li>
<li>Question “results” page – displays results for a particular question.<br  />
</li>
<li>Vote action – handles voting for a particular choice in a particular question.<br  />
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Daha fazla view</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="background-color: #000000;"> </span><span style="color: #00bfff;">def</span> <span style="color: #daa520;">detail</span>(request, question_id):
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> HttpResponse(<span style="color: #deb887;">"You're looking at question %s."</span> % question_id)

<span style="color: #00bfff;">def</span> <span style="color: #daa520;">results</span>(request, question_id):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">response</span> = <span style="color: #deb887;">"You're looking at the results of question %s."</span>
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> HttpResponse(response % question_id)

<span style="color: #00bfff;">def</span> <span style="color: #daa520;">vote</span>(request, question_id):
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> HttpResponse(<span style="color: #deb887;">"You're voting on question %s."</span> % question_id)
</pre>
</div>

<p>
polls/urls.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.conf.urls <span style="color: #00bfff;">import</span> url

<span style="color: #00bfff;">from</span> . <span style="color: #00bfff;">import</span> views

<span style="color: #4eee94;">urlpatterns</span> = [
<span style="background-color: #000000;"> </span>   <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">ex: /polls/</span>
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^$'</span>, views.index, name=<span style="color: #deb887;">'index'</span>),
<span style="background-color: #000000;"> </span>   <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">ex: /polls/5/</span>
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^(?P&lt;question_id&gt;[0-9]+)/$'</span>, views.detail, name=<span style="color: #deb887;">'detail'</span>),
<span style="background-color: #000000;"> </span>   <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">ex: /polls/5/results/</span>
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^(?P&lt;question_id&gt;[0-9]+)/results/$'</span>, views.results, name=<span style="color: #deb887;">'results'</span>),
<span style="background-color: #000000;"> </span>   <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">ex: /polls/5/vote/</span>
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^(?P&lt;question_id&gt;[0-9]+)/vote/$'</span>, views.vote, name=<span style="color: #deb887;">'vote'</span>),
]
</pre>
</div>

<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.http <span style="color: #00bfff;">import</span> HttpResponse

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Question


<span style="color: #00bfff;">def</span> <span style="color: #daa520;">index</span>(request):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">latest_question_list</span> = Question.objects.order_by(<span style="color: #deb887;">'-pub_date'</span>)[:5]
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">output</span> = <span style="color: #deb887;">', '</span>.join([q.question_text <span style="color: #00bfff;">for</span> q <span style="color: #00bfff;">in</span> latest_question_list])
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> HttpResponse(output)

<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Leave the rest of the views (detail, results, vote) unchanged</span>
</pre>
</div>

<p>
View kulllanımındaki problem sayfa tasarımının hard-coded olarak yapılmış<br  />
olmasıdır. Bunun önüne geçmek için django template dili kullanılabilir.<br  />
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites/mydj_sites/polls
mkdir templates;<span style="color: #f08080;">cd</span> templates
mkdir polls
</pre>
</div>


<p>
polls/templates/polls/index.html<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="background-color: #000000;"> </span>{% <span style="color: #00bfff;">if</span> latest_question_list %}
<span style="background-color: #000000;"> </span>   &lt;ul&gt;
<span style="background-color: #000000;"> </span>   {% <span style="color: #00bfff;">for</span> question <span style="color: #00bfff;">in</span> latest_question_list %}
        &lt;li&gt;&lt;a <span style="color: #4eee94;">href</span>=<span style="color: #deb887;">"/polls/{{ question.id }}/"</span>&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;
<span style="background-color: #000000;"> </span>   {% endfor %}
<span style="background-color: #000000;"> </span>   &lt;/ul&gt;
{% <span style="color: #00bfff;">else</span> %}
<span style="background-color: #000000;"> </span>   &lt;p&gt;No polls are available.&lt;/p&gt;
{% endif %}
</pre>
</div>

<p>
Şimdi de polls/views.py dosyamızın oluşturduğumuz template'i kullanmasını<br  />
sağlayalım.<br  />
</p>

<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.http <span style="color: #00bfff;">import</span> HttpResponse
<span style="color: #00bfff;">from</span> django.template <span style="color: #00bfff;">import</span> loader

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Question


<span style="color: #00bfff;">def</span> <span style="color: #daa520;">index</span>(request):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">latest_question_list</span> = Question.objects.order_by(<span style="color: #deb887;">'-pub_date'</span>)[:5]
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">template</span> = loader.get_template(<span style="color: #deb887;">'polls/index.html'</span>)
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">context</span> = {
        <span style="color: #deb887;">'latest_question_list'</span>: latest_question_list,
<span style="background-color: #000000;"> </span>   }
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> HttpResponse(template.render(context, request))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3"><span class="section-number-4">1.3.3</span> Bir kısayol: render()</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.shortcuts <span style="color: #00bfff;">import</span> render

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Question


<span style="color: #00bfff;">def</span> <span style="color: #daa520;">index</span>(request):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">latest_question_list</span> = Question.objects.order_by(<span style="color: #deb887;">'-pub_date'</span>)[:5]
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">context</span> = {<span style="color: #deb887;">'latest_question_list'</span>: latest_question_list}
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> render(request, <span style="color: #deb887;">'polls/index.html'</span>, context)
</pre>
</div>

<p>
<b>HttpResponse(template.render(context, request))</b> yerine <b>return<br  />
render(request, 'polls/index.html', context)</b> kulllandık. Ayrıca <b>loader</b><br  />
ve <b>HttpReponse</b> yerine sadece <b>render</b> import etmemiz yeterli oldu. Ancak<br  />
render gerektirmeyen <b>static sayfalarınız</b> için hala loader ve HttpResponse<br  />
sınıflarını kullanmanız gerekir.<br  />
</p>
</div>
</div>
<div id="outline-container-sec-1-3-4" class="outline-4">
<h4 id="sec-1-3-4"><span class="section-number-4">1.3.4</span> 404 hatası oluşturmak</h4>
<div class="outline-text-4" id="text-1-3-4">
<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.http <span style="color: #00bfff;">import</span> Http404
<span style="color: #00bfff;">from</span> django.shortcuts <span style="color: #00bfff;">import</span> render

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Question
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">...</span>
<span style="color: #00bfff;">def</span> <span style="color: #daa520;">detail</span>(request, question_id):
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">try</span>:
        <span style="color: #4eee94;">question</span> = Question.objects.get(pk=question_id)
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">except</span> Question.DoesNotExist:
        <span style="color: #00bfff;">raise</span> Http404(<span style="color: #deb887;">"Question does not exist"</span>)
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> render(request, <span style="color: #deb887;">'polls/detail.html'</span>, {<span style="color: #deb887;">'question'</span>: question})
</pre>
</div>

<p>
polls/templates/polls/detail.html<br  />
</p>
<div class="org-src-container">

<pre class="src src-python">{{ question }}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3-5" class="outline-4">
<h4 id="sec-1-3-5"><span class="section-number-4">1.3.5</span> Bir başka kısayol: get_object_or_404()</h4>
<div class="outline-text-4" id="text-1-3-5">
<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.shortcuts <span style="color: #00bfff;">import</span> get_object_or_404, render

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Question
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">...</span>
<span style="color: #00bfff;">def</span> <span style="color: #daa520;">detail</span>(request, question_id):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">question</span> = get_object_or_404(Question, pk=question_id)
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> render(request, <span style="color: #deb887;">'polls/detail.html'</span>, {<span style="color: #deb887;">'question'</span>: question})
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3-6" class="outline-4">
<h4 id="sec-1-3-6"><span class="section-number-4">1.3.6</span> template sistemini kullanalım</h4>
<div class="outline-text-4" id="text-1-3-6">
<p>
polls/templates/polls/detail.html<br  />
</p>
<div class="org-src-container">

<pre class="src src-python">&lt;h1&gt;{{ question.question_text }}&lt;/h1&gt;
&lt;ul&gt;
<span style="background-color: #000000;"> </span>{% <span style="color: #00bfff;">for</span> choice <span style="color: #00bfff;">in</span> question.choice_set.<span style="color: #f08080;">all</span> %}
<span style="background-color: #000000;"> </span>   &lt;li&gt;{{ choice.choice_text }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3-7" class="outline-4">
<h4 id="sec-1-3-7"><span class="section-number-4">1.3.7</span> Hardcoded URL'lerin kaldırılması</h4>
<div class="outline-text-4" id="text-1-3-7">
<p>
polls/templates/polls/index.html<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #7f7f7f;">#</span><span style="color: #7f7f7f;">&lt;li&gt;&lt;a href="/polls/{{ question.id }}/"&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;</span>
&lt;li&gt;&lt;a <span style="color: #4eee94;">href</span>=<span style="color: #deb887;">"{% url 'detail' question.id %}"</span>&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3-8" class="outline-4">
<h4 id="sec-1-3-8"><span class="section-number-4">1.3.8</span> URL isim uzaylarının oluşturulması</h4>
<div class="outline-text-4" id="text-1-3-8">
<p>
polls uygulamasında "details" url'i olduğu gibi başka bir uygulamada da<br  />
"details" url'i olabilir. Djangonun bunu ayırt edebilmesi için aşağıdaki<br  />
işlemler yapılmalıdır.<br  />
</p>

<p>
polls/urls.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.conf.urls <span style="color: #00bfff;">import</span> url

<span style="color: #00bfff;">from</span> . <span style="color: #00bfff;">import</span> views

<span style="color: #4eee94;">app_name</span> = <span style="color: #deb887;">'polls'</span>
<span style="color: #4eee94;">urlpatterns</span> = [
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^$'</span>, views.index, name=<span style="color: #deb887;">'index'</span>),
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^(?P&lt;question_id&gt;[0-9]+)/$'</span>, views.detail, name=<span style="color: #deb887;">'detail'</span>),
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^(?P&lt;question_id&gt;[0-9]+)/results/$'</span>, views.results, name=<span style="color: #deb887;">'results'</span>),
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^(?P&lt;question_id&gt;[0-9]+)/vote/$'</span>, views.vote, name=<span style="color: #deb887;">'vote'</span>),
]
</pre>
</div>

<p>
polls/templates/polls/index.html<br  />
</p>
<div class="org-src-container">

<pre class="src src-python">/*&lt;li&gt;&lt;a <span style="color: #4eee94;">href</span>=<span style="color: #deb887;">"{% url 'detail' question.id %}"</span>&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;*/
&lt;li&gt;&lt;a <span style="color: #4eee94;">href</span>=<span style="color: #deb887;">"{% url 'polls:detail' question.id %}"</span>&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Writing your first Django app, part 4</h3>
<div class="outline-text-3" id="text-1-4">
</div><div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> Basit bir form</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
polls/templates/polls/detail.html<br  />
</p>
<div class="org-src-container">

<pre class="src src-python">&lt;h1&gt;{{ question.question_text }}&lt;/h1&gt;

{% <span style="color: #00bfff;">if</span> error_message %}&lt;p&gt;&lt;strong&gt;{{ error_message }}&lt;/strong&gt;&lt;/p&gt;{% endif %}

&lt;form <span style="color: #4eee94;">action</span>=<span style="color: #deb887;">"{% url 'polls:vote' question.id %}"</span> <span style="color: #4eee94;">method</span>=<span style="color: #deb887;">"post"</span>&gt;
{% csrf_token %}
{% <span style="color: #00bfff;">for</span> choice <span style="color: #00bfff;">in</span> question.choice_set.<span style="color: #f08080;">all</span> %}
<span style="background-color: #000000;"> </span>   &lt;<span style="color: #f08080;">input</span> <span style="color: #f08080;">type</span>=<span style="color: #deb887;">"radio"</span> <span style="color: #4eee94;">name</span>=<span style="color: #deb887;">"choice"</span> <span style="color: #f08080;">id</span>=<span style="color: #deb887;">"choice{{ forloop.counter }}"</span> <span style="color: #4eee94;">value</span>=<span style="color: #deb887;">"{{ choice.id }}"</span> /&gt;
<span style="background-color: #000000;"> </span>   &lt;label <span style="color: #00bfff;">for</span>=<span style="color: #deb887;">"choice{{ forloop.counter }}"</span>&gt;{{ choice.choice_text }}&lt;/label&gt;&lt;br /&gt;
{% endfor %}
&lt;<span style="color: #f08080;">input</span> <span style="color: #f08080;">type</span>=<span style="color: #deb887;">"submit"</span> <span style="color: #4eee94;">value</span>=<span style="color: #deb887;">"Vote"</span> /&gt;
&lt;/form&gt;
</pre>
</div>

<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.shortcuts <span style="color: #00bfff;">import</span> get_object_or_404, render
<span style="color: #00bfff;">from</span> django.http <span style="color: #00bfff;">import</span> HttpResponseRedirect, HttpResponse
<span style="color: #00bfff;">from</span> django.urls <span style="color: #00bfff;">import</span> reverse

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Choice, Question
<span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">...</span>
<span style="color: #00bfff;">def</span> <span style="color: #daa520;">vote</span>(request, question_id):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">question</span> = get_object_or_404(Question, pk=question_id)
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">try</span>:
        <span style="color: #4eee94;">selected_choice</span> = question.choice_set.get(pk=request.POST[<span style="color: #deb887;">'choice'</span>])
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">except</span> (<span style="color: #98f5ff;">KeyError</span>, Choice.DoesNotExist):
        <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Redisplay the question voting form.</span>
        <span style="color: #00bfff;">return</span> render(request, <span style="color: #deb887;">'polls/detail.html'</span>, {
            <span style="color: #deb887;">'question'</span>: question,
            <span style="color: #deb887;">'error_message'</span>: <span style="color: #deb887;">"You didn't select a choice."</span>,
        })
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">else</span>:
        <span style="color: #4eee94;">selected_choice.votes</span> += 1
        selected_choice.save()
        <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Always return an HttpResponseRedirect after successfully dealing</span>
        <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">with POST data. This prevents data from being posted twice if a</span>
        <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">user hits the Back button.</span>
        <span style="color: #00bfff;">return</span> HttpResponseRedirect(reverse(<span style="color: #deb887;">'polls:results'</span>, args=(question.<span style="color: #f08080;">id</span>,)))
</pre>
</div>
<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.shortcuts <span style="color: #00bfff;">import</span> get_object_or_404, render


<span style="color: #00bfff;">def</span> <span style="color: #daa520;">results</span>(request, question_id):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">question</span> = get_object_or_404(Question, pk=question_id)
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> render(request, <span style="color: #deb887;">'polls/results.html'</span>, {<span style="color: #deb887;">'question'</span>: question})
</pre>
</div>
<p>
polls/templates/polls/results.html<br  />
</p>
<div class="org-src-container">

<pre class="src src-python">&lt;h1&gt;{{ question.question_text }}&lt;/h1&gt;

&lt;ul&gt;
{% <span style="color: #00bfff;">for</span> choice <span style="color: #00bfff;">in</span> question.choice_set.<span style="color: #f08080;">all</span> %}
<span style="background-color: #000000;"> </span>   &lt;li&gt;{{ choice.choice_text }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;

&lt;a <span style="color: #4eee94;">href</span>=<span style="color: #deb887;">"{% url 'polls:detail' question.id %}"</span>&gt;Vote again?&lt;/a&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2"><span class="section-number-4">1.4.2</span> Generic viewlar</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
These views represent a common case of basic Web development:<br  />
</p>
<ul class="org-ul">
<li>getting data from the database according to a parameter passed in the URL,<br  />
</li>
<li>loading a template and returning the rendered template.<br  />
</li>
</ul>

<p>
Because this is so common, Django provides a shortcut, called the “generic<br  />
views” system.<br  />
</p>
</div>

<ol class="org-ol"><li><a id="sec-1-4-2-1" name="sec-1-4-2-1"></a>urls.py'nin güncellenmesi<br  /><div class="outline-text-5" id="text-1-4-2-1">
<p>
polls/urls.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.conf.urls <span style="color: #00bfff;">import</span> url

<span style="color: #00bfff;">from</span> . <span style="color: #00bfff;">import</span> views

<span style="color: #4eee94;">app_name</span> = <span style="color: #deb887;">'polls'</span>
<span style="color: #4eee94;">urlpatterns</span> = [
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^$'</span>, views.IndexView.as_view(), name=<span style="color: #deb887;">'index'</span>),
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^(?P&lt;pk&gt;[0-9]+)/$'</span>, views.DetailView.as_view(), name=<span style="color: #deb887;">'detail'</span>),
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^(?P&lt;pk&gt;[0-9]+)/results/$'</span>, views.ResultsView.as_view(), name=<span style="color: #deb887;">'results'</span>),
<span style="background-color: #000000;"> </span>   url(r<span style="color: #deb887;">'^(?P&lt;question_id&gt;[0-9]+)/vote/$'</span>, views.vote, name=<span style="color: #deb887;">'vote'</span>),
]
</pre>
</div>
<p>
<b>Önemli</b> url(r'^(?P&amp;lt;pk&amp;gt;[0-9]+)/$', views.DetailView.as_view(),<br  />
name='detail'),  &lt;pk&gt; yazan yerde daha önceden &lt;question_id&gt; yazıyordu. Bu<br  />
değişikliğin sebebi, generic viewların primary_key ile çalışıyor olması<br  />
</p>
</div>
</li>
<li><a id="sec-1-4-2-2" name="sec-1-4-2-2"></a>views.py'nin güncellenmesi<br  /><div class="outline-text-5" id="text-1-4-2-2">
<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.shortcuts <span style="color: #00bfff;">import</span> get_object_or_404, render
<span style="color: #00bfff;">from</span> django.http <span style="color: #00bfff;">import</span> HttpResponseRedirect
<span style="color: #00bfff;">from</span> django.urls <span style="color: #00bfff;">import</span> reverse
<span style="color: #00bfff;">from</span> django.views <span style="color: #00bfff;">import</span> generic

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Choice, Question


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">IndexView</span>(generic.ListView):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">template_name</span> = <span style="color: #deb887;">'polls/index.html'</span>
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">context_object_name</span> = <span style="color: #deb887;">'latest_question_list'</span>

<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">get_queryset</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #deb887;">"""Return the last five published questions."""</span>
        <span style="color: #00bfff;">return</span> Question.objects.order_by(<span style="color: #deb887;">'-pub_date'</span>)[:5]


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">DetailView</span>(generic.DetailView):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">model</span> = Question
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">template_name</span> = <span style="color: #deb887;">'polls/detail.html'</span>


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">ResultsView</span>(generic.DetailView):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">model</span> = Question
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">template_name</span> = <span style="color: #deb887;">'polls/results.html'</span>


<span style="color: #00bfff;">def</span> <span style="color: #daa520;">vote</span>(request, question_id):
<span style="background-color: #000000;"> </span>   ... <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">same as above, no changes needed.</span>
</pre>
</div>
<p>
DetailView varsayılan olarak &lt;app name&gt;/templates/&lt;app name&gt;/&lt;model<br  />
name&gt;_detail.html dosyasını template olarak kullanır. Bizim durumumuzda bu<br  />
dosya question_detail.html olacaktı. template_name değişkeni ile bunu<br  />
değiştirdik.<br  />
Aynı şekilde ListView de varsayılan olarak &lt;app name&gt;/templates/&lt;app name&gt;/&lt;model<br  />
name&gt;_list.html kullanacaktı.<br  />
</p>
</div>
</li></ol>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Writing your first Django app, part 5</h3>
<div class="outline-text-3" id="text-1-5">
</div><div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> Otomatik testler (ilginç bir konu)</h4>
<div class="outline-text-4" id="text-1-5-1">
</div><ol class="org-ol"><li><a id="sec-1-5-1-1" name="sec-1-5-1-1"></a>Neden test?<br  /><div class="outline-text-5" id="text-1-5-1-1">
<p>
Otomatik testler 3 farklı fazda yazılabilir. Başta, sonda, ortada :D<br  />
</p>

<p>
<b>We identify a bug</b><br  />
Fortunately, there’s a little bug in the polls application for us to fix<br  />
right away: the Question.was_published_recently() method returns True if the<br  />
Question was published within the last day (which is correct) but also if<br  />
the Question’s pub_date field is in the future (which certainly isn’t).<br  />
</p>
</div>
</li>

<li><a id="sec-1-5-1-2" name="sec-1-5-1-2"></a>Nasıl test?<br  /><div class="outline-text-5" id="text-1-5-1-2">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites
pyton manage.py shell <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">python shell django projemizi root alarak ba&#351;l&#305;yor.   </span>

&gt;&gt;&gt; import datetime
&gt;&gt;&gt; from django.utils import timezone
&gt;&gt;&gt; from polls.models import Question
&gt;&gt;&gt; <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">create a Question instance with pub_date 30 days in the future</span>
&gt;&gt;&gt; future_question = Question(<span style="color: #4eee94;">pub_date</span>=timezone.now() + datetime.timedelta(<span style="color: #4eee94;">days</span>=30))
&gt;&gt;&gt; <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">was it published recently?</span>
&gt;&gt;&gt; future_question.was_published_recently()
True
</pre>
</div>

<p>
Yukarıda görüldüğü gibi yayın tarihi gelecekte olan bir soru için de yakın<br  />
zamanda yayınlanmış cevabı dönüyor.<br  />
</p>

<p>
polls/test.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">import</span> datetime

<span style="color: #00bfff;">from</span> django.utils <span style="color: #00bfff;">import</span> timezone
<span style="color: #00bfff;">from</span> django.test <span style="color: #00bfff;">import</span> TestCase

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Question


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">QuestionMethodTests</span>(TestCase):

<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">test_was_published_recently_with_future_question</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #deb887;">"""</span>
<span style="color: #deb887;">        was_published_recently() should return False for questions whose</span>
<span style="color: #deb887;">        pub_date is in the future.</span>
<span style="color: #deb887;">        """</span>
        <span style="color: #4eee94;">time</span> = timezone.now() + datetime.timedelta(days=30)
        <span style="color: #4eee94;">future_question</span> = Question(pub_date=time)
        <span style="color: #00bfff;">self</span>.assertIs(future_question.was_published_recently(), <span style="color: #a2cd5a;">False</span>)
</pre>
</div>

<p>
Testlerin çalıştırılması<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites
python manage.py test polls
</pre>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2"><span class="section-number-4">1.5.2</span> Bug'ın düzeltilmesi</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
polls/models.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">def</span> <span style="color: #daa520;">was_published_recently</span>(<span style="color: #00bfff;">self</span>):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">now</span> = timezone.now()
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> now - datetime.timedelta(days=1) &lt;= <span style="color: #00bfff;">self</span>.pub_date &lt;= now
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-3" class="outline-4">
<h4 id="sec-1-5-3"><span class="section-number-4">1.5.3</span> Daha karmaşık örnekler</h4>
<div class="outline-text-4" id="text-1-5-3">
<p>
While we’re here, we can further pin down the was_published_recently()<br  />
method; in fact, it would be positively embarrassing if in fixing one bug<br  />
we had introduced another.<br  />
</p>

<p>
polls/test.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">def</span> <span style="color: #daa520;">test_was_published_recently_with_old_question</span>(<span style="color: #00bfff;">self</span>):
<span style="background-color: #000000;"> </span>   <span style="color: #deb887;">"""</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   was_published_recently() should return False for questions whose</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   pub_date is older than 1 day.</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   """</span>
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">time</span> = timezone.now() - datetime.timedelta(days=30)
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">old_question</span> = Question(pub_date=time)
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">self</span>.assertIs(old_question.was_published_recently(), <span style="color: #a2cd5a;">False</span>)

<span style="color: #00bfff;">def</span> <span style="color: #daa520;">test_was_published_recently_with_recent_question</span>(<span style="color: #00bfff;">self</span>):
<span style="background-color: #000000;"> </span>   <span style="color: #deb887;">"""</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   was_published_recently() should return True for questions whose</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   pub_date is within the last day.</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   """</span>
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">time</span> = timezone.now() - datetime.timedelta(hours=1)
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">recent_question</span> = Question(pub_date=time)
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">self</span>.assertIs(recent_question.was_published_recently(), <span style="color: #a2cd5a;">True</span>)
</pre>
</div>

<p>
Bu genişletme ile bu metodun tarih bazında bütün olası girdilerine karşı çıktıları<br  />
kontrol edilmiş oldu.<br  />
</p>
</div>
</div>

<div id="outline-container-sec-1-5-4" class="outline-4">
<h4 id="sec-1-5-4"><span class="section-number-4">1.5.4</span> View'ı test etmek</h4>
<div class="outline-text-4" id="text-1-5-4">
<ul class="org-ul">
<li>Django test istemcisi<br  />
Djangonun sunduğu test istemcisini test.py dosyası üzerinden ya da shell<br  />
üzerinden kullanabiliriz.<br  />

<p>
Shell üzerinden test.py üzerinden denemeden farklı olarak aşağıdaki iki<br  />
satır gerekir.<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites
pyton manage.py shell <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">python shell django projemizi root alarak ba&#351;l&#305;yor.</span>
&gt;&gt;&gt; from django.test.utils import setup_test_environment
&gt;&gt;&gt; setup_test_environment()
</pre>
</div>

<p>
setup_test_environment() installs a template renderer which will allow us<br  />
to examine some additional attributes on responses such as<br  />
response.context that otherwise wouldn’t be available. Note that this<br  />
method does not setup a test database, so the following will be run<br  />
against the existing database and the output may differ slightly<br  />
depending on what questions you already created. You might get unexpected<br  />
results if your TIME_ZONE in settings.py isn’t correct. If you don’t<br  />
remember setting it earlier, check it before continuing.<br  />
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #f08080;">cd</span> ~/Proje/python/mydj_sites
<span style="color: #f08080;">.</span> django_env/bin/activate
<span style="color: #f08080;">cd</span> mydj_sites
pyton manage.py shell <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">python shell django projemizi root alarak ba&#351;l&#305;yor.</span>
&gt;&gt;&gt; from django.test.utils import setup_test_environment
&gt;&gt;&gt; setup_test_environment()
&gt;&gt;&gt; from django.test import Client
&gt;&gt;&gt; <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">create an instance of the client for our use</span>
&gt;&gt;&gt; client = Client()       
&gt;&gt;&gt; <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">get a response from '/'</span>
&gt;&gt;&gt; response = client.get(<span style="color: #deb887;">'/'</span>)
&gt;&gt;&gt; <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">we should expect a 404 from that address</span>
&gt;&gt;&gt; response.status_code
404
&gt;&gt;&gt; <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">on the other hand we should expect to find something at '/polls/'</span>
&gt;&gt;&gt; <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">we'll use 'reverse()' rather than a hardcoded URL</span>
&gt;&gt;&gt; from django.urls import reverse
&gt;&gt;&gt; response = client.get(reverse(<span style="color: #deb887;">'polls:index'</span>))
&gt;&gt;&gt; response.status_code
200
&gt;&gt;&gt; response.content
b<span style="color: #deb887;">'\n    &lt;ul&gt;\n    \n        &lt;li&gt;&lt;a href="/polls/1/"&gt;What&amp;#39;s up?&lt;/a&gt;&lt;/li&gt;\n    \n    &lt;/ul&gt;\n\n'</span>
&gt;&gt;&gt; <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">If the following doesn't work, you probably omitted the call to</span>
&gt;&gt;&gt; <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">setup_test_environment() described above</span>
&gt;&gt;&gt; response.context[<span style="color: #deb887;">'latest_question_list'</span>]
&lt;QuerySet [&lt;Question: What<span style="color: #deb887;">'s up?&gt;]&gt;</span>
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-5-5" class="outline-4">
<h4 id="sec-1-5-5"><span class="section-number-4">1.5.5</span> View'ı geliştirelim</h4>
<div class="outline-text-4" id="text-1-5-5">
<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.utils <span style="color: #00bfff;">import</span> timezone
<span style="color: #00bfff;">def</span> <span style="color: #daa520;">get_queryset</span>(<span style="color: #00bfff;">self</span>):
<span style="background-color: #000000;"> </span>   <span style="color: #deb887;">"""</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   Return the last five published questions (not including those set to be</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   published in the future).</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   """</span>
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> Question.objects.<span style="color: #f08080;">filter</span>(
        pub_date__lte=timezone.now()
<span style="background-color: #000000;"> </span>   ).order_by(<span style="color: #deb887;">'-pub_date'</span>)[:5]
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-6" class="outline-4">
<h4 id="sec-1-5-6"><span class="section-number-4">1.5.6</span> View için otomatik test yazalım</h4>
<div class="outline-text-4" id="text-1-5-6">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.urls <span style="color: #00bfff;">import</span> reverse

<span style="color: #00bfff;">def</span> <span style="color: #daa520;">create_question</span>(question_text, days):
<span style="background-color: #000000;"> </span>   <span style="color: #deb887;">"""</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   Creates a question with the given `question_text` and published the</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   given number of `days` offset to now (negative for questions published</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   in the past, positive for questions that have yet to be published).</span>
<span style="color: #deb887; background-color: #000000;"> </span><span style="color: #deb887;">   """</span>
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">time</span> = timezone.now() + datetime.timedelta(days=days)
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> Question.objects.create(question_text=question_text, pub_date=time)


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">QuestionViewTests</span>(TestCase):
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">test_index_view_with_no_questions</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #deb887;">"""</span>
<span style="color: #deb887;">        If no questions exist, an appropriate message should be displayed.</span>
<span style="color: #deb887;">        """</span>
        <span style="color: #4eee94;">response</span> = <span style="color: #00bfff;">self</span>.client.get(reverse(<span style="color: #deb887;">'polls:index'</span>))
        <span style="color: #00bfff;">self</span>.assertEqual(response.status_code, 200)
        <span style="color: #00bfff;">self</span>.assertContains(response, <span style="color: #deb887;">"No polls are available."</span>)
        <span style="color: #00bfff;">self</span>.assertQuerysetEqual(response.context[<span style="color: #deb887;">'latest_question_list'</span>], [])

<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">test_index_view_with_a_past_question</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #deb887;">"""</span>
<span style="color: #deb887;">        Questions with a pub_date in the past should be displayed on the</span>
<span style="color: #deb887;">        index page.</span>
<span style="color: #deb887;">        """</span>
        create_question(question_text=<span style="color: #deb887;">"Past question."</span>, days=-30)
        <span style="color: #4eee94;">response</span> = <span style="color: #00bfff;">self</span>.client.get(reverse(<span style="color: #deb887;">'polls:index'</span>))
        <span style="color: #00bfff;">self</span>.assertQuerysetEqual(
            response.context[<span style="color: #deb887;">'latest_question_list'</span>],
            [<span style="color: #deb887;">'&lt;Question: Past question.&gt;'</span>]
        )

<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">test_index_view_with_a_future_question</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #deb887;">"""</span>
<span style="color: #deb887;">        Questions with a pub_date in the future should not be displayed on</span>
<span style="color: #deb887;">        the index page.</span>
<span style="color: #deb887;">        """</span>
        create_question(question_text=<span style="color: #deb887;">"Future question."</span>, days=30)
        <span style="color: #4eee94;">response</span> = <span style="color: #00bfff;">self</span>.client.get(reverse(<span style="color: #deb887;">'polls:index'</span>))
        <span style="color: #00bfff;">self</span>.assertContains(response, <span style="color: #deb887;">"No polls are available."</span>)
        <span style="color: #00bfff;">self</span>.assertQuerysetEqual(response.context[<span style="color: #deb887;">'latest_question_list'</span>], [])

<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">test_index_view_with_future_question_and_past_question</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #deb887;">"""</span>
<span style="color: #deb887;">        Even if both past and future questions exist, only past questions</span>
<span style="color: #deb887;">        should be displayed.</span>
<span style="color: #deb887;">        """</span>
        create_question(question_text=<span style="color: #deb887;">"Past question."</span>, days=-30)
        create_question(question_text=<span style="color: #deb887;">"Future question."</span>, days=30)
        <span style="color: #4eee94;">response</span> = <span style="color: #00bfff;">self</span>.client.get(reverse(<span style="color: #deb887;">'polls:index'</span>))
        <span style="color: #00bfff;">self</span>.assertQuerysetEqual(
            response.context[<span style="color: #deb887;">'latest_question_list'</span>],
            [<span style="color: #deb887;">'&lt;Question: Past question.&gt;'</span>]
        )

<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">test_index_view_with_two_past_questions</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #deb887;">"""</span>
<span style="color: #deb887;">        The questions index page may display multiple questions.</span>
<span style="color: #deb887;">        """</span>
        create_question(question_text=<span style="color: #deb887;">"Past question 1."</span>, days=-30)
        create_question(question_text=<span style="color: #deb887;">"Past question 2."</span>, days=-5)
        <span style="color: #4eee94;">response</span> = <span style="color: #00bfff;">self</span>.client.get(reverse(<span style="color: #deb887;">'polls:index'</span>))
        <span style="color: #00bfff;">self</span>.assertQuerysetEqual(
            response.context[<span style="color: #deb887;">'latest_question_list'</span>],
            [<span style="color: #deb887;">'&lt;Question: Past question 2.&gt;'</span>, <span style="color: #deb887;">'&lt;Question: Past question 1.&gt;'</span>]
        )
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-5-7" class="outline-4">
<h4 id="sec-1-5-7"><span class="section-number-4">1.5.7</span> DetailView için test yazılması</h4>
<div class="outline-text-4" id="text-1-5-7">
<p>
polls/views.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">DetailView</span>(generic.DetailView):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">model</span> = Question
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">template_name</span> = <span style="color: #deb887;">'polls/detail.html'</span>

<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">get_queryset</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #deb887;">"""</span>
<span style="color: #deb887;">        Excludes any questions that aren't published yet.</span>
<span style="color: #deb887;">        """</span>
        <span style="color: #00bfff;">return</span> Question.objects.<span style="color: #f08080;">filter</span>(pub_date__lte=timezone.now())
</pre>
</div>

<p>
polls/test.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">QuestionIndexDetailTests</span>(TestCase):
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">test_detail_view_with_a_future_question</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #deb887;">"""</span>
<span style="color: #deb887;">        The detail view of a question with a pub_date in the future should</span>
<span style="color: #deb887;">        return a 404 not found.</span>
<span style="color: #deb887;">        """</span>
        <span style="color: #4eee94;">future_question</span> = create_question(question_text=<span style="color: #deb887;">'Future question.'</span>, days=5)
        <span style="color: #4eee94;">url</span> = reverse(<span style="color: #deb887;">'polls:detail'</span>, args=(future_question.<span style="color: #f08080;">id</span>,))
        <span style="color: #4eee94;">response</span> = <span style="color: #00bfff;">self</span>.client.get(url)
        <span style="color: #00bfff;">self</span>.assertEqual(response.status_code, 404)

<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">test_detail_view_with_a_past_question</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #deb887;">"""</span>
<span style="color: #deb887;">        The detail view of a question with a pub_date in the past should</span>
<span style="color: #deb887;">        display the question's text.</span>
<span style="color: #deb887;">        """</span>
        <span style="color: #4eee94;">past_question</span> = create_question(question_text=<span style="color: #deb887;">'Past Question.'</span>, days=-5)
        <span style="color: #4eee94;">url</span> = reverse(<span style="color: #deb887;">'polls:detail'</span>, args=(past_question.<span style="color: #f08080;">id</span>,))
        <span style="color: #4eee94;">response</span> = <span style="color: #00bfff;">self</span>.client.get(url)
        <span style="color: #00bfff;">self</span>.assertContains(response, past_question.question_text)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Writing your first Django app, part 6</h3>
<div class="outline-text-3" id="text-1-6">
</div><div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> Templateler üzerine deneme (CSS ekleme)</h4>
<div class="outline-text-4" id="text-1-6-1">
</div><ol class="org-ol"><li><a id="sec-1-6-1-1" name="sec-1-6-1-1"></a>görüntü ekleme<br  /><div class="outline-text-5" id="text-1-6-1-1">
<ol class="org-ol">
<li>mydj_sites/mydj_sites/mydj_sites/settings.py dosyasında INSTALLED_APPS listesinde<br  />
django.contrib.staticfiles yoksa eklenecek.<br  />
</li>
<li>1. adımdaki dosyada STATIC_URL='<i>static</i>' olarak tanımlanacak.<br  />
</li>
<li>static dosyalar polls/static/polls dizini altında olacak. Örnek olarak<br  />
polls/static/polls/survey.jpg<br  />
</li>
<li>polls/templates/polls/index.html<br  />
<div class="org-src-container">

<pre class="src src-python">{% load static %}
&lt;img <span style="color: #4eee94;">src</span>=<span style="color: #deb887;">"{% static "</span>polls/survey.jpg<span style="color: #deb887;">" %}"</span> <span style="color: #4eee94;">alt</span>=<span style="color: #deb887;">"Oylar&#305; g&#246;relim"</span>/&gt;
{% <span style="color: #00bfff;">if</span> latest_question_list %}
<span style="background-color: #000000;"> </span>  &lt;ul&gt;
<span style="background-color: #000000;"> </span>   <span style="background-color: #000000;"> </span>{% <span style="color: #00bfff;">for</span> question <span style="color: #00bfff;">in</span> latest_question_list %}
           &lt;li&gt;&lt;a <span style="color: #4eee94;">href</span>=<span style="color: #deb887;">"{% url 'polls:detail' question.id %}"</span>&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;
<span style="background-color: #000000;"> </span>   <span style="background-color: #000000;"> </span>{% endfor %}
<span style="background-color: #000000;"> </span>  &lt;/ul&gt;
{% <span style="color: #00bfff;">else</span> %}
<span style="background-color: #000000;"> </span>  &lt;p&gt;No polls are available.&lt;/p&gt;
{% endif %}
</pre>
</div>
</li>
</ol>
</div>
</li>
<li><a id="sec-1-6-1-2" name="sec-1-6-1-2"></a>javascript ve css ekleme<br  /><div class="outline-text-5" id="text-1-6-1-2">
<p>
mydj_sites/mydj_sites/polls/static/polls<br  />
├── frontend.js<br  />
├── style.css<br  />
└── survey.jpg<br  />
</p>

<p>
frontend.js<br  />
</p>
<div class="org-src-container">

<pre class="src src-javascript">$(
    <span style="color: #00bfff;">function</span>() {
        $( <span style="color: #deb887;">"img"</span> ).each( <span style="color: #00bfff;">function</span>() {
            <span style="color: #00bfff;">var</span> <span style="color: #4eee94;">$img</span> = $( <span style="color: #a2cd5a;">this</span> );
            <span style="color: #00bfff;">var</span> <span style="color: #4eee94;">img_scale</span> = $img.width() / $img.height();
            $img.width( $img.parent().width() );
            $img.height( $img.height() * $img_scale );
        });
    }
);
</pre>
</div>

<p>
style.css<br  />
</p>
<div class="org-src-container">

<pre class="src src-css"><span style="color: #daa520;">.center </span>{
    <span style="color: #4eee94;">margin</span>: auto;
    <span style="color: #4eee94;">width</span>: 50%;
    <span style="color: #4eee94;">border</span>: 3px solid green;
    <span style="color: #4eee94;">padding</span>: 10px;
}
</pre>
</div>

<p>
templates/index.html<br  />
</p>
<div class="org-src-container">

<pre class="src src-html">{% load static %}
&lt;<span style="color: #daa520;">script</span> <span style="color: #4eee94;">src</span>=<span style="color: #deb887;">"https://code.jquery.com/jquery-3.1.0.min.js"</span>&gt;&lt;/<span style="color: #daa520;">script</span>&gt;
&lt;<span style="color: #daa520;">script</span> <span style="color: #4eee94;">type</span>=<span style="color: #deb887;">"text/javascript"</span> <span style="color: #4eee94;">src</span>=<span style="color: #deb887;">"{% static "</span>polls/frontend.js<span style="color: #deb887;">" %}"</span>&gt;&lt;/<span style="color: #daa520;">script</span>&gt;
&lt;<span style="color: #daa520;">link</span> <span style="color: #4eee94;">rel</span>=<span style="color: #deb887;">"stylesheet"</span> <span style="color: #4eee94;">type</span>=<span style="color: #deb887;">"text/css"</span> <span style="color: #4eee94;">href</span>=<span style="color: #deb887;">"{% static "</span>polls/style.css<span style="color: #deb887;">" %}"</span>&gt;&lt;/<span style="color: #daa520;">script</span>&gt;
&lt;<span style="color: #daa520;">div</span> <span style="color: #4eee94;">class</span>=<span style="color: #deb887;">"center"</span>&gt;
  &lt;<span style="color: #daa520;">img</span> <span style="color: #4eee94;">src</span>=<span style="color: #deb887;">"{% static "</span>polls/survey.jpg<span style="color: #deb887;">" %}"</span> <span style="color: #4eee94;">alt</span>=<span style="color: #deb887;">"Oylar&#305; g&#246;relim"</span>/&gt;
  {% if latest_question_list %}
  &lt;<span style="color: #daa520;">ul</span>&gt;
    {% for question in latest_question_list %}
    &lt;<span style="color: #daa520;">li</span>&gt;&lt;<span style="color: #daa520;">a</span> <span style="color: #4eee94;">href</span>=<span style="color: #deb887;">"{% url 'polls:detail' question.id %}"</span>&gt;{{ question.question_text }}&lt;/<span style="color: #daa520;">a</span>&gt;&lt;/<span style="color: #daa520;">li</span>&gt;
    {% endfor %}
  &lt;/<span style="color: #daa520;">ul</span>&gt;
  {% else %}
  &lt;<span style="color: #daa520;">p</span>&gt;No polls are available.&lt;/<span style="color: #daa520;">p</span>&gt;
  {% endif %}
&lt;/<span style="color: #daa520;">div</span>&gt;
</pre>
</div>
</div>
</li></ol>
</div>
</div>
<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Writing your first Django app, part 7</h3>
<div class="outline-text-3" id="text-1-7">
</div><div id="outline-container-sec-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> Admin panelinin düzenlenmesi</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
Daha önce "admin.site.register(Question)" ile Question modelini admin<br  />
penceresine eklemiştik.<br  />
</p>

<p>
polls/admin.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.contrib <span style="color: #00bfff;">import</span> admin

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Question


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">QuestionAdmin</span>(admin.ModelAdmin):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">fields</span> = [<span style="color: #deb887;">'pub_date'</span>, <span style="color: #deb887;">'question_text'</span>]

admin.site.register(Question, QuestionAdmin)
</pre>
</div>

<p>
Yukarıdaki kod ile Question modelinin admin panelinde oluşturulması<br  />
sırasında Field sıralamaları belirlenmiş oldu.<br  />
</p>

<p>
polls/admin.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.contrib <span style="color: #00bfff;">import</span> admin

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Question


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">QuestionAdmin</span>(admin.ModelAdmin):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">fieldsets</span> = [
        (<span style="color: #a2cd5a;">None</span>,               {<span style="color: #deb887;">'fields'</span>: [<span style="color: #deb887;">'question_text'</span>]}),
        (<span style="color: #deb887;">'Date information'</span>, {<span style="color: #deb887;">'fields'</span>: [<span style="color: #deb887;">'pub_date'</span>]}),
<span style="background-color: #000000;"> </span>   ]

admin.site.register(Question, QuestionAdmin)
</pre>
</div>
<p>
Yukarıdaki kod ile de ilgili alanlar gruplanabilir.<br  />
</p>
</div>
</div>
<div id="outline-container-sec-1-7-2" class="outline-4">
<h4 id="sec-1-7-2"><span class="section-number-4">1.7.2</span> Choice modelinin admin paneline eklenmesi ve sonrası :D</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
Choice modelini aynı Question modelini eklediğimiz gibi<br  />
"admin.site.register(Choice)" şeklinde ekleyebiliriz. Böylelikle Choice<br  />
nesnelerimizi de admin panelimizden ekleyebiliriz. Ancak görüldüğü gibi<br  />
Soruyu oluşturduktan sonra soruya ait cevapları ayrıca eklemek etkin bir<br  />
yol değildir. Daha iyileştirmek için cevap ekleme seçeneklerini soru ekleme<br  />
penceresine gömelim.<br  />
</p>

<p>
polls/admin.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.contrib <span style="color: #00bfff;">import</span> admin

<span style="color: #00bfff;">from</span> .models <span style="color: #00bfff;">import</span> Choice, Question


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">ChoiceInline</span>(admin.StackedInline):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">model</span> = Choice
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">extra</span> = 3


<span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">QuestionAdmin</span>(admin.ModelAdmin):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">fieldsets</span> = [
        (<span style="color: #a2cd5a;">None</span>,               {<span style="color: #deb887;">'fields'</span>: [<span style="color: #deb887;">'question_text'</span>]}),
        (<span style="color: #deb887;">'Date information'</span>, {<span style="color: #deb887;">'fields'</span>: [<span style="color: #deb887;">'pub_date'</span>], <span style="color: #deb887;">'classes'</span>: [<span style="color: #deb887;">'collapse'</span>]}),
<span style="background-color: #000000;"> </span>   ]
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">inlines</span> = [ChoiceInline]

admin.site.register(Question, QuestionAdmin)
</pre>
</div>

<p>
Sonuç nasıl oldu :) Fena değil. Ancak sorular aşağı doğru fazla yer<br  />
kapladı. Bunun için "class ChoiceInline(admin.StackedInline):" satırındaki<br  />
<b>StackedInline</b> yerine <b>TabularInline</b> koyabiliriz.<br  />
</p>
</div>
</div>
<div id="outline-container-sec-1-7-3" class="outline-4">
<h4 id="sec-1-7-3"><span class="section-number-4">1.7.3</span> Şimdi de Question listemizi düzenleyelim</h4>
<div class="outline-text-4" id="text-1-7-3">
<p>
Varsayılan olarak Model ana sayfamızdaki listede sadece modelin str<br  />
fonksiyonunun çıktısı görüntülerinir. Bunun yanında faydalı alanları da<br  />
gösterebiliriz.<br  />
</p>

<p>
polls/admin.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">QuestionAdmin</span>(admin.ModelAdmin):
<span style="background-color: #000000;"> </span>   <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">...</span>
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">list_display</span> = (<span style="color: #deb887;">'question_text'</span>, <span style="color: #deb887;">'pub_date'</span>, <span style="color: #deb887;">'was_published_recently'</span>)
</pre>
</div>

<p>
Bu penceredeki alan isimleri aşağıdaki şekilde düzenlenebilir.<br  />
polls/models.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">class</span> <span style="color: #98f5ff;">Question</span>(models.Model):
<span style="background-color: #000000;"> </span>   <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">...</span>
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">def</span> <span style="color: #daa520;">was_published_recently</span>(<span style="color: #00bfff;">self</span>):
        <span style="color: #4eee94;">now</span> = timezone.now()
        <span style="color: #00bfff;">return</span> now - datetime.timedelta(days=1) &lt;= <span style="color: #00bfff;">self</span>.pub_date &lt;= now
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">was_published_recently.admin_order_field</span> = <span style="color: #deb887;">'pub_date'</span>
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">was_published_recently.boolean</span> = <span style="color: #a2cd5a;">True</span>
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">was_published_recently.short_description</span> = <span style="color: #deb887;">'Published recently?'</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-7-4" class="outline-4">
<h4 id="sec-1-7-4"><span class="section-number-4">1.7.4</span> Admin penceresinde Question modellerinin süzülmesi ve arama</h4>
<div class="outline-text-4" id="text-1-7-4">
<p>
polls/admin.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #4eee94;">list_filter</span> = [<span style="color: #deb887;">'pub_date'</span>]
<span style="color: #4eee94;">search_fields</span> = [<span style="color: #deb887;">'question_text'</span>]
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-7-5" class="outline-4">
<h4 id="sec-1-7-5"><span class="section-number-4">1.7.5</span> Admin pencere template'inin düzenlenmesi</h4>
<div class="outline-text-4" id="text-1-7-5">
<p>
Create a templates directory in your project directory (the one that<br  />
contains manage.py)<br  />
</p>

<div class="org-src-container">

<pre class="src src-sh">mkdir mydj_sites/mydj_sites/templates
mkdir mydj_sites/mydj_sites/templates/admin
</pre>
</div>

<p>
mydj_sites/mydj_sites/mydj_sites/settings.py<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #4eee94;">TEMPLATES</span> = [
<span style="background-color: #000000;"> </span>   {
        <span style="color: #deb887;">'BACKEND'</span>: <span style="color: #deb887;">'django.template.backends.django.DjangoTemplates'</span>,
        <span style="color: #deb887;">'DIRS'</span>: [os.path.join(BASE_DIR, <span style="color: #deb887;">'templates'</span>)],
        <span style="color: #deb887;">'APP_DIRS'</span>: <span style="color: #a2cd5a;">True</span>,
        <span style="color: #deb887;">'OPTIONS'</span>: {
            <span style="color: #deb887;">'context_processors'</span>: [
                <span style="color: #deb887;">'django.template.context_processors.debug'</span>,
                <span style="color: #deb887;">'django.template.context_processors.request'</span>,
                <span style="color: #deb887;">'django.contrib.auth.context_processors.auth'</span>,
                <span style="color: #deb887;">'django.contrib.messages.context_processors.messages'</span>,
            ],
        },
<span style="background-color: #000000;"> </span>   },
]
</pre>
</div>

<p>
Şimdi django admin template dosyasını kendi templates/admin dizinimiz<br  />
altına kopyalayacağız. Django şablonun bulunduğu dizini aşağıdaki şekilde bulabiliriz.<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh">python -c <span style="color: #deb887;">"import django; print(django.__path__)"</span>
</pre>
</div>

<p>
Yukarıdaki dizin altındaki "contrib/admin/templates/admin/base_site.html"<br  />
dosyayı mydj_sites/mydj_sites/templates/admin dizini altına<br  />
kopyalayalım. İçeriği aşağıdaki gibi<br  />
</p>
<div class="org-src-container">

<pre class="src src-python">{% extends <span style="color: #deb887;">"admin/base.html"</span> %}

{% block title %}{{ title }} | {{ site_title|default:_(<span style="color: #deb887;">'Django site admin'</span>) }}{% endblock %}

{% block branding %}
&lt;h1 <span style="color: #f08080;">id</span>=<span style="color: #deb887;">"site-name"</span>&gt;&lt;a <span style="color: #4eee94;">href</span>=<span style="color: #deb887;">"{% url 'admin:index' %}"</span>&gt;{{ site_header|default:_(<span style="color: #deb887;">'Django administration'</span>) }}&lt;/a&gt;&lt;/h1&gt;
{% endblock %}

{% block nav-<span style="color: #00bfff;">global</span> %}{% endblock %}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> Yerelleştirme ve Çeviri</h3>
<div class="outline-text-3" id="text-1-8">
</div><div id="outline-container-sec-1-8-1" class="outline-4">
<h4 id="sec-1-8-1"><span class="section-number-4">1.8.1</span> Giriş</h4>
<div class="outline-text-4" id="text-1-8-1">
<p>
Django projelerinin yerelleştirilebilir olması için çevirilmesi gereken<br  />
string alanlar için bu alanlar <b>translation strings</b> adı verilen kancalar<br  />
koymamız gerekir.<br  />
</p>

<p>
Bundan sonra Django tüm projeden bu alanları çekerek <b>message file</b> dosyası<br  />
oluşturur. Bu dosya içerisinden ilgili dil için gerekli çeviriler kolaylıkla<br  />
yapılabilir. Bu dosya derlendikten sonra Django çalışma sırasında dil<br  />
değişimi yapabilir.<br  />
</p>

<p>
Yerelleştirme Djangoda varsayılan olarak açıktır. Kullanılmak istenmiyorsa<br  />
settings.py dosyasındaki <b>USE_I18N = FALSE</b> olarak ayarlanabilir.<br  />
</p>

<p>
Yerelleştirmee konusunda bir noktada yerel biçimlerin<br  />
düzenlenmesidir. Bildindiği gibi farklı ülkelerde tarih ve ondalık ayraç<br  />
gösterimi farklı olabilir. Bunun için <b>USE_L10N</b> ayarlaması yapılmalıdır.<br  />
</p>

<p>
Projeniz için çevirinin aktif olup olmadığını kontrol etmek<br  />
için settings.py dosyasında <b>MIDDLEWARE</b><br  />
dizisinde <b>django.middleware.locale.LocaleMiddleware</b> olup olmadığını<br  />
kontrol edebilirsiniz.<br  />
</p>
</div>
</div>
<div id="outline-container-sec-1-8-2" class="outline-4">
<h4 id="sec-1-8-2"><span class="section-number-4">1.8.2</span> Çeviri: Python kodu içinde</h4>
<div class="outline-text-4" id="text-1-8-2">
<ul class="org-ul">
<li>Standart çeviri<br  />
<i>ugettext()</i> fonksiyonu ile <b>translation string</b> ler<br  />
belirlenir. Fonsiyonun kısayolu olarak (<b>_</b>) kullanılabilir. Python'un<br  />
interaktif shell uygulaması <b>_</b> karakterini <b>son sonuç</b> olarak<br  />
tanımladığı için kullanım sırasında <i>ugettext()</i> <b>_()</b> olarak tekrar<br  />
import edilerek sorun çözülür.<br  />

<p>
Örnek view<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">from</span> django.utils.translation <span style="color: #00bfff;">import</span> ugettext <span style="color: #00bfff;">as</span> _
<span style="color: #00bfff;">from</span> django.http <span style="color: #00bfff;">import</span> HttpResponse

<span style="color: #00bfff;">def</span> <span style="color: #daa520;">my_view</span>(request):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">output</span> = _(<span style="color: #deb887;">"Welcome to my site."</span>)
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> HttpResponse(output)
</pre>
</div>

<p>
Çeviri kod içerisinde değişkenler ve hesaplanmış(join ile birleştirilmiş<br  />
gibi) veriler üzerinde de uygulanabilir.<br  />
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">def</span> <span style="color: #daa520;">my_view</span>(request):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">words</span> = [<span style="color: #deb887;">'Welcome'</span>, <span style="color: #deb887;">'to'</span>, <span style="color: #deb887;">'my'</span>, <span style="color: #deb887;">'site.'</span>]
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">output</span> = _(<span style="color: #deb887;">' '</span>.join(words))
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> HttpResponse(output)
</pre>
</div>
<p>
Açıkcası hesaplanmış veri kısmını anlayamadım. <b>???</b><br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">def</span> <span style="color: #daa520;">my_view</span>(request):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">sentence</span> = <span style="color: #deb887;">'Welcome to my site.'</span>
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">output</span> = _(sentence)
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> HttpResponse(output)
</pre>
</div>

<p>
Hemen altındaki uyarıda, Djangonun değişken ve hesaplanmış verilerdeki<br  />
stringleri bulamadığını bunun için <b>makemessages</b> kullanıldığını<br  />
yazmış. <b>???</b><br  />
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">def</span> <span style="color: #daa520;">my_view</span>(request, m, d):
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">output</span> = _(<span style="color: #deb887;">'Today is %(month)s %(day)s.'</span>) % {<span style="color: #deb887;">'month'</span>: m, <span style="color: #deb887;">'day'</span>: d}
<span style="background-color: #000000;"> </span>   <span style="color: #00bfff;">return</span> HttpResponse(output)
</pre>
</div>

<p>
Yukarıdaki örnekte, farklı dillerdeki farklı kelime dizilişlerini yenmek<br  />
için konumsal(positional) interpolasyon kullanmak yerine<br  />
isimlendirilmiş(named-string) interpolasyon kullanmak gerektiğini<br  />
gösteriyor.<br  />
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #00bfff;">def</span> <span style="color: #daa520;">my_view</span>(request):
<span style="background-color: #000000;"> </span>   <span style="color: #7f7f7f;"># </span><span style="color: #7f7f7f;">Translators: This message appears on the home page only</span>
<span style="background-color: #000000;"> </span>   <span style="color: #4eee94;">output</span> = ugettext(<span style="color: #deb887;">"Welcome to my site."</span>)
</pre>
</div>

<p>
Yukarıdaki şekilde uzantısı \*.po olan <b>messagefile</b> içerisinde çevirmene<br  />
yardımcı olacak çeviri metnine yorum satırı eklenebiliyor. Çıktısı<br  />
aşağıdaki gibi.<br  />
</p>

<div class="org-src-container">

<pre class="src src-po">#. Translators: This message appears on the home page only
# path/to/python/file.py:123
msgid "Welcome to my site."
msgstr ""
</pre>
</div>
</li>
<li>Marking strings as no-op <b>???</b><br  />
</li>
<li></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Araştırılacak <code>[0/3]</code></h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li><code>[&#xa0;]</code> Polls uygulamasında cevapları oluştururken verilen oy sayısı da<br  />
belirlenebiliyor. Bu uygun olmaz. Varsayılan oy sayısının sıfır olarak<br  />
belirlenmesi ve oluşturulurken bu değerin girilmemesini sağlamak iyi olur.<br  />
</li>
<li><code>[&#xa0;]</code> utf-8 karakterlerin kullanabilmesi<br  />
</li>
<li><code>[&#xa0;]</code> farklı dillerin esnek bir şekilde implemente edilmesi (Localization)<br  />
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Bağlantılar</h2>
<div class="outline-text-2" id="text-3">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<center>
<p>
<a href="blog.html">Blog</a> <a href="bash.html">Bash</a> <a href="baslangiclar.html">Başlangıç</a> <a href="muzik.html">Müzik</a> <a href="okunacaklar.html">Okunacaklar</a> <a href="notlar.html">Notlar</a> <a href="projeler.html">Projeler</a> <a href="sozler.html">Sözler</a> <a href="tatil_rotalari.html">Tatil Rotaları</a> <a href="emacs.html">Emacs</a> <a href="index.html">Ana Sayfa</a><br  />
</p>
<a href="#"><img src="img/yukari.png" width="2%" height="2%"></a>
</center>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: umt</p>
<p class="date">Created: 2017-03-22 Çrş 14:21</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
